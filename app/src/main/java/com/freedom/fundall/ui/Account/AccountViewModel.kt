package com.freedom.fundall.ui.Account

import android.content.SharedPreferences
import androidx.lifecycle.LiveData
import androidx.lifecycle.ViewModel
import androidx.lifecycle.viewModelScope
import com.freedom.fundall.model.AuthResponse
import com.freedom.fundall.repository.AccountRepository
import com.freedom.fundall.utils.Resource
import com.freedom.fundall.utils.get
import kotlinx.coroutines.launch

class AccountViewModel(val repository: AccountRepository): ViewModel() {
    val getAuthUser:LiveData<Resource<AuthResponse?>> =repository.getSession()

    val sharedPreferences:SharedPreferences?=null
    val getToken=sharedPreferences?.get("AuthToken","Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImMyYzIzMThiYWY3ZmE4YzA5NDZkN2YwYTczMzQzY2M3OWU1MTU0ZDkwZGU1NTRhMTBhZDM3YmRlOGE5OWY4YzlhODkzOGU2NWY0NmM0Y2U4In0.eyJhdWQiOiIzIiwianRpIjoiYzJjMjMxOGJhZjdmYThjMDk0NmQ3ZjBhNzMzNDNjYzc5ZTUxNTRkOTBkZTU1NGExMGFkMzdiZGU4YTk5ZjhjOWE4OTM4ZTY1ZjQ2YzRjZTgiLCJpYXQiOjE1Njg4ODA4NTIsIm5iZiI6MTU2ODg4MDg1MiwiZXhwIjoxNjAwNTAzMjUyLCJzdWIiOiI2MSIsInNjb3BlcyI6W119.WxofHLRmYxhZJc8T_pZAiN7OgTEXBwkIlo5k-WZgPasVJ0VitIP8R7VE5wv9tdf4zuvpo8vzQA2lxOR2n5Rk4YV3J4OrFgp8QcKOmaFxtM6sxoC82Pe2BubXdh-e-7LhnBMo8xfrEzaSmrghS5tuEWb6DNEHtcPRhHq3XXo5vA0HiE9Lc4_d7fiqtPezVWy_C-jFlZSORKkE3z1Xp8kt21xLkf2AcJtFX5xKCW9SOhRwivLU0JxOcwMT_jzmCHkZiML-lskjt-Coo2PrqRlnwibowJ_0xtkmH2Q-xa1_CBBeQoc0lEX-9H3ERfE-HsKjvpVCeYk5HK8Xj3NGwrWNKIOSNgYfIVSXU-bMKaMUQ8yFhgvqYxscPOEUhyLP6FDwHPhXgAZeH9dXdCPBke-l_2xdCN7LLRW2VBbq204vk_qlIcZTC0mEmSjvZlrjNmNdYm8t-0lPsX6t04uylYN5Z66rj9cbWKTV2vLsqO_NmAUKepgIn2dD8OL606ik35KKsF89QUV9CjJ7WFKH09lWDDu-qyKF5b9VOXiJeSln5A4zBMSTE2WcBIhZb6evGGpVWYV70NVdxqiboWG15U6MrH5KOq4iPdcxZ2aN24kZ6p0fMnAntm_YXgwWxQSuUJMfLrENUBgl7JBafnuuJEjnVkLTbFpZVFXMWBgVjXYXtfo")

    fun getUser(){
        viewModelScope.launch {
            repository.getUser("Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImp0aSI6ImMyYzIzMThiYWY3ZmE4YzA5NDZkN2YwYTczMzQzY2M3OWU1MTU0ZDkwZGU1NTRhMTBhZDM3YmRlOGE5OWY4YzlhODkzOGU2NWY0NmM0Y2U4In0.eyJhdWQiOiIzIiwianRpIjoiYzJjMjMxOGJhZjdmYThjMDk0NmQ3ZjBhNzMzNDNjYzc5ZTUxNTRkOTBkZTU1NGExMGFkMzdiZGU4YTk5ZjhjOWE4OTM4ZTY1ZjQ2YzRjZTgiLCJpYXQiOjE1Njg4ODA4NTIsIm5iZiI6MTU2ODg4MDg1MiwiZXhwIjoxNjAwNTAzMjUyLCJzdWIiOiI2MSIsInNjb3BlcyI6W119.WxofHLRmYxhZJc8T_pZAiN7OgTEXBwkIlo5k-WZgPasVJ0VitIP8R7VE5wv9tdf4zuvpo8vzQA2lxOR2n5Rk4YV3J4OrFgp8QcKOmaFxtM6sxoC82Pe2BubXdh-e-7LhnBMo8xfrEzaSmrghS5tuEWb6DNEHtcPRhHq3XXo5vA0HiE9Lc4_d7fiqtPezVWy_C-jFlZSORKkE3z1Xp8kt21xLkf2AcJtFX5xKCW9SOhRwivLU0JxOcwMT_jzmCHkZiML-lskjt-Coo2PrqRlnwibowJ_0xtkmH2Q-xa1_CBBeQoc0lEX-9H3ERfE-HsKjvpVCeYk5HK8Xj3NGwrWNKIOSNgYfIVSXU-bMKaMUQ8yFhgvqYxscPOEUhyLP6FDwHPhXgAZeH9dXdCPBke-l_2xdCN7LLRW2VBbq204vk_qlIcZTC0mEmSjvZlrjNmNdYm8t-0lPsX6t04uylYN5Z66rj9cbWKTV2vLsqO_NmAUKepgIn2dD8OL606ik35KKsF89QUV9CjJ7WFKH09lWDDu-qyKF5b9VOXiJeSln5A4zBMSTE2WcBIhZb6evGGpVWYV70NVdxqiboWG15U6MrH5KOq4iPdcxZ2aN24kZ6p0fMnAntm_YXgwWxQSuUJMfLrENUBgl7JBafnuuJEjnVkLTbFpZVFXMWBgVjXYXtfo")
        }

    }

}